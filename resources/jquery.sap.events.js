/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("jquery.sap.events");jQuery.sap.require("jquery.sap.keycodes");(function(){jQuery.sap._touchToMouseEvent=true;if("ontouchend"in document){var h=false;var t=null;var I=false;var s=null;var S=null;var f=function(T,e){if(!h||!jQuery.sap._touchToMouseEvent){return}var M=e.type=="touchend"?e.changedTouches[0]:e.touches[0];var i=document.createEvent('MouseEvent');i.initMouseEvent(T,true,true,window,e.detail,M.screenX,M.screenY,M.clientX,M.clientY,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.button,e.relatedTarget);i.isSynthetic=true;window.setTimeout(function(){t.dispatchEvent(i)},0)};var a=function(e){return e.target.tagName.match(/input|textarea|select/i)};var o=function(e){if(!e.isSynthetic&&!a(e)&&jQuery.sap._touchToMouseEvent){e.stopPropagation();e.preventDefault()}};var b=function(e){var T=e.touches;h=(T.length==1&&!a(e));if(h){I=false;var i=T[0];t=i.target;if(t.nodeType==3){t=t.parentNode}s=i.clientX;S=i.clientY;f("mousedown",e)}};var c=function(e){if(h){var T=e.touches[0];if(Math.abs(T.clientX-s)>10||Math.abs(T.clientY-S)>10){I=true}if(I){f("mousemove",e)}}};var d=function(e){f("mouseup",e);if(!I){f("click",e)}};var g=function(e){f("mouseup",e)};document.addEventListener('mousedown',o,true);document.addEventListener('mouseover',o,true);document.addEventListener('mouseup',o,true);document.addEventListener('mouseout',o,true);document.addEventListener('click',o,true);document.addEventListener('touchstart',b,true);document.addEventListener('touchmove',c,true);document.addEventListener('touchend',d,true);document.addEventListener('touchcancel',g,true)}jQuery.sap.ControlEvents=["click","dblclick","focusin","focusout","keydown","keypress","keyup","mousedown","mouseout","mouseover","mouseup","select","selectstart","dragstart","dragenter","dragover","dragleave","dragend","drop","paste"];jQuery.sap.PseudoEvents={sapdown:{sName:"sapdown",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ARROW_DOWN&&!n(e)}},sapdownmodifiers:{sName:"sapdownmodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ARROW_DOWN&&n(e)}},sapshow:{sName:"sapshow",aTypes:["keydown"],fnCheck:function(e){return(e.keyCode==jQuery.sap.KeyCodes.F4&&!n(e))||(e.keyCode==jQuery.sap.KeyCodes.ARROW_DOWN&&m(e,false,true,false))}},sapup:{sName:"sapup",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ARROW_UP&&!n(e)}},sapupmodifiers:{sName:"sapupmodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ARROW_UP&&n(e)}},saphide:{sName:"saphide",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ARROW_UP&&m(e,false,true,false)}},sapleft:{sName:"sapleft",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ARROW_LEFT&&!n(e)}},sapleftmodifiers:{sName:"sapleftmodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ARROW_LEFT&&n(e)}},sapright:{sName:"sapright",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ARROW_RIGHT&&!n(e)}},saprightmodifiers:{sName:"saprightmodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ARROW_RIGHT&&n(e)}},saphome:{sName:"saphome",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.HOME&&!n(e)}},saphomemodifiers:{sName:"saphomemodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.HOME&&n(e)}},saptop:{sName:"saptop",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.HOME&&m(e,true,false,false)}},sapend:{sName:"sapend",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.END&&!n(e)}},sapendmodifiers:{sName:"sapendmodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.END&&n(e)}},sapbottom:{sName:"sapbottom",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.END&&m(e,true,false,false)}},sappageup:{sName:"sappageup",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.PAGE_UP&&!n(e)}},sappageupmodifiers:{sName:"sappageupmodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.PAGE_UP&&n(e)}},sappagedown:{sName:"sappagedown",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.PAGE_DOWN&&!n(e)}},sappagedownmodifiers:{sName:"sappagedownmodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.PAGE_DOWN&&n(e)}},sapselect:{sName:"sapselect",aTypes:["keydown"],fnCheck:function(e){return(e.keyCode==jQuery.sap.KeyCodes.ENTER||e.keyCode==jQuery.sap.KeyCodes.SPACE)&&!n(e)}},sapselectmodifiers:{sName:"sapselectmodifiers",aTypes:["keydown"],fnCheck:function(e){return(e.keyCode==jQuery.sap.KeyCodes.ENTER||e.keyCode==jQuery.sap.KeyCodes.SPACE)&&n(e)}},sapspace:{sName:"sapspace",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.SPACE&&!n(e)}},sapspacemodifiers:{sName:"sapspacemodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.SPACE&&n(e)}},sapenter:{sName:"sapenter",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ENTER&&!n(e)}},sapentermodifiers:{sName:"sapentermodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ENTER&&n(e)}},sapbackspace:{sName:"sapbackspace",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.BACKSPACE&&!n(e)}},sapbackspacemodifiers:{sName:"sapbackspacemodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.BACKSPACE&&n(e)}},sapdelete:{sName:"sapdelete",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.DELETE&&!n(e)}},sapdeletemodifiers:{sName:"sapdeletemodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.DELETE&&n(e)}},sapexpand:{sName:"sapexpand",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.NUMPAD_PLUS&&!n(e)}},sapexpandmodifiers:{sName:"sapexpandmodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.NUMPAD_PLUS&&n(e)}},sapcollapse:{sName:"sapcollapse",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.NUMPAD_MINUS&&!n(e)}},sapcollapsemodifiers:{sName:"sapcollapsemodifiers",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.NUMPAD_MINUS&&n(e)}},sapcollapseall:{sName:"sapcollapseall",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.NUMPAD_ASTERISK&&!n(e)}},sapescape:{sName:"sapescape",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.ESCAPE&&!n(e)}},saptabnext:{sName:"saptabnext",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.TAB&&!n(e)}},saptabprevious:{sName:"saptabprevious",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.TAB&&m(e,false,false,true)}},sapskipforward:{sName:"sapskipforward",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.F6&&!n(e)}},sapskipback:{sName:"sapskipback",aTypes:["keydown"],fnCheck:function(e){return e.keyCode==jQuery.sap.KeyCodes.F6&&m(e,false,false,true)}},sapdecrease:{sName:"sapdecrease",aTypes:["keydown"],fnCheck:function(e){var r=sap.ui.getCore().getConfiguration().getRTL();var i=r?jQuery.sap.KeyCodes.ARROW_RIGHT:jQuery.sap.KeyCodes.ARROW_LEFT;return(e.keyCode==i||e.keyCode==jQuery.sap.KeyCodes.ARROW_DOWN)&&!n(e)}},sapdecreasemodifiers:{sName:"sapdecreasemodifiers",aTypes:["keydown"],fnCheck:function(e){var r=sap.ui.getCore().getConfiguration().getRTL();var i=r?jQuery.sap.KeyCodes.ARROW_RIGHT:jQuery.sap.KeyCodes.ARROW_LEFT;return(e.keyCode==i||e.keyCode==jQuery.sap.KeyCodes.ARROW_DOWN)&&n(e)}},sapincrease:{sName:"sapincrease",aTypes:["keydown"],fnCheck:function(e){var r=sap.ui.getCore().getConfiguration().getRTL();var N=r?jQuery.sap.KeyCodes.ARROW_LEFT:jQuery.sap.KeyCodes.ARROW_RIGHT;return(e.keyCode==N||e.keyCode==jQuery.sap.KeyCodes.ARROW_UP)&&!n(e)}},sapincreasemodifiers:{sName:"sapincreasemodifiers",aTypes:["keydown"],fnCheck:function(e){var r=sap.ui.getCore().getConfiguration().getRTL();var N=r?jQuery.sap.KeyCodes.ARROW_LEFT:jQuery.sap.KeyCodes.ARROW_RIGHT;return(e.keyCode==N||e.keyCode==jQuery.sap.KeyCodes.ARROW_UP)&&n(e)}},sapprevious:{sName:"sapprevious",aTypes:["keydown"],fnCheck:function(e){var r=sap.ui.getCore().getConfiguration().getRTL();var i=r?jQuery.sap.KeyCodes.ARROW_RIGHT:jQuery.sap.KeyCodes.ARROW_LEFT;return(e.keyCode==i||e.keyCode==jQuery.sap.KeyCodes.ARROW_UP)&&!n(e)}},sappreviousmodifiers:{sName:"sappreviousmodifiers",aTypes:["keydown"],fnCheck:function(e){var r=sap.ui.getCore().getConfiguration().getRTL();var i=r?jQuery.sap.KeyCodes.ARROW_RIGHT:jQuery.sap.KeyCodes.ARROW_LEFT;return(e.keyCode==i||e.keyCode==jQuery.sap.KeyCodes.ARROW_UP)&&n(e)}},sapnext:{sName:"sapnext",aTypes:["keydown"],fnCheck:function(e){var r=sap.ui.getCore().getConfiguration().getRTL();var N=r?jQuery.sap.KeyCodes.ARROW_LEFT:jQuery.sap.KeyCodes.ARROW_RIGHT;return(e.keyCode==N||e.keyCode==jQuery.sap.KeyCodes.ARROW_DOWN)&&!n(e)}},sapnextmodifiers:{sName:"sapnextmodifiers",aTypes:["keydown"],fnCheck:function(e){var r=sap.ui.getCore().getConfiguration().getRTL();var N=r?jQuery.sap.KeyCodes.ARROW_LEFT:jQuery.sap.KeyCodes.ARROW_RIGHT;return(e.keyCode==N||e.keyCode==jQuery.sap.KeyCodes.ARROW_DOWN)&&n(e)}},sapdelayeddoubleclick:{sName:"sapdelayeddoubleclick",aTypes:["click"],fnCheck:function(e){var i=jQuery(e.target);var j=e.timeStamp;var r=i.data("sapdelayeddoubleclick_lastClickTimestamp");var u=r||0;i.data("sapdelayeddoubleclick_lastClickTimestamp",j);var v=j-u;return(v>=300&&v<=1300)}}};var P=["sapdown","sapdownmodifiers","sapshow","sapup","sapupmodifiers","saphide","sapleft","sapleftmodifiers","sapright","saprightmodifiers","saphome","saphomemodifiers","saptop","sapend","sapendmodifiers","sapbottom","sappageup","sappageupmodifiers","sappagedown","sappagedownmodifiers","sapselect","sapselectmodifiers","sapspace","sapspacemodifiers","sapenter","sapentermodifiers","sapexpand","sapbackspace","sapbackspacemodifiers","sapdelete","sapdeletemodifiers","sapexpandmodifiers","sapcollapse","sapcollapsemodifiers","sapcollapseall","sapescape","saptabnext","saptabprevious","sapskipforward","sapskipback","sapprevious","sappreviousmodifiers","sapnext","sapnextmodifiers","sapdecrease","sapdecreasemodifiers","sapincrease","sapincreasemodifiers","sapdelayeddoubleclick"];(function initTouchEventSupport(){function e(){var C="xx-test-mobile";var u=window["sap-ui-config"];var v=document.location.search.indexOf("sap-ui-"+C)>-1||(u&&u[C]);v=v||(document.location.search.indexOf("sap-ui-xx-fakeOS")>-1||!!jQuery.sap.byId("sap-ui-bootstrap").attr("data-sap-ui-xx-fakeOS"));return v}jQuery.sap.touchEventMode="OFF";var A=[];var j=[];if("ontouchend"in document){jQuery.sap.touchEventMode="ON";jQuery.event.props.push("touches","targetTouches","changedTouches");A.push("touchstart","touchend","touchmove","touchcancel")}else if(e()){jQuery.sap.touchEventMode="SIM";jQuery.sap.log.warning("MOBILE TOUCH EVENT TEST MODE ACTIVE","","jQuery.sap.events");function r(N,O){var H="__"+N+"Handler";var u="sap"+N;A.push(u);j.push({sName:N,aTypes:[u],fnCheck:function(E){return true}});jQuery.event.special[u]={add:function(v){var w=this,$=jQuery(this);var x=function(E){if(!(E.type!="mouseout"||(E.type==="mouseout"&&jQuery.sap.checkMouseEnterOrLeave(E,w)))){return}var y=jQuery.event.fix(E.originalEvent);y.type=u;var T=[{identifier:1,pageX:y.pageX,pageY:y.pageY,clientX:y.clientX,clientY:y.clientY,screenX:y.screenX,screenY:y.screenY,radiusX:1,radiusY:1,rotationAngle:0}];y.touches=y.changedTouches=y.targetTouches=T;if(N==="touchend"){y.touches=y.targetTouches=[]}if(N==="touchstart"||$.data("__touch_in_progress")){$.data("__touch_in_progress","X");v.handler.call(w,y);if(N==="touchend"){$.removeData("__touch_in_progress")}}};$.data(H+v.guid,x);for(var i=0;i<O.length;i++){$.bind(O[i],x)}},remove:function(v){var $=jQuery(this);var w=$.data(H+v.guid);$.removeData(H+v.guid);for(var i=0;i<O.length;i++){jQuery.event.remove(this,O[i],w)}}}};r("touchstart",["mousedown"]);r("touchend",["mouseup","mouseout"]);r("touchmove",["mousemove"])}if(jQuery.sap.touchEventMode!="OFF"){jQuery.sap.require("sap.ui.thirdparty.jquery-mobile-custom");A.push("swipe","tap","swipeleft","swiperight","scrollstart","scrollstop");j.push({sName:"swipebegin",aTypes:["swipeleft","swiperight"],fnCheck:function(E){var R=sap.ui.getCore().getConfiguration().getRTL();return(R&&E.type==="swiperight")||(!R&&E.type==="swipeleft")}});j.push({sName:"swipeend",aTypes:["swipeleft","swiperight"],fnCheck:function(E){var R=sap.ui.getCore().getConfiguration().getRTL();return(!R&&E.type==="swiperight")||(R&&E.type==="swipeleft")}});jQuery.sap.ControlEvents=jQuery.sap.ControlEvents.concat(A);for(var i=0;i<j.length;i++){jQuery.sap.PseudoEvents[j[i].sName]=j[i];P.push(j[i].sName)}}}());function k(){var e=jQuery.sap.PseudoEvents;var r=[];for(var N in e){if(e[N].aTypes){for(var j=0,i=e[N].aTypes.length;j<i;j++){var T=e[N].aTypes[j];if(jQuery.inArray(T,r)==-1){r.push(T)}}}}return r}var l=k();function m(e,C,A,i){return e.shiftKey==i&&e.altKey==A&&p(e)==C}function n(e){return e.shiftKey||e.altKey||p(e)}function p(e){return!!(e.metaKey||e.ctrlKey)}jQuery.Event.prototype.getPseudoTypes=function(){var e=[];if(jQuery.inArray(this.type,l)!=-1){var j=P;var r=j.length;var u=null;for(var i=0;i<r;i++){u=jQuery.sap.PseudoEvents[j[i]];if(u.aTypes&&jQuery.inArray(this.type,u.aTypes)>-1&&u.fnCheck&&u.fnCheck(this)){e.push(u.sName)}}}this.getPseudoTypes=function(){return e.slice()};return e.slice()};jQuery.Event.prototype.isPseudoType=function(T){var e=this.getPseudoTypes();if(T){return jQuery.inArray(T,e)>-1}else{return e.length>0}};var _=jQuery.Event.prototype.preventDefault;jQuery.Event.prototype.preventDefault=function(){_.apply(this,arguments);var e=this.originalEvent;if(!e){return}if(e.keyCode!=0){try{if(!jQuery.browser.mozilla){e.keyCode=0}}catch(i){}}};jQuery.sap.bindAnyEvent=function bindAnyEvent(C){if(C){jQuery(document).bind(jQuery.sap.ControlEvents.join(" "),C)}};jQuery.sap.unbindAnyEvent=function unbindAnyEvent(C){if(C){jQuery(document).unbind(jQuery.sap.ControlEvents.join(" "),C)}};jQuery.sap.checkMouseEnterOrLeave=function checkMouseEnterOrLeave(E,D){if(E.type!="mouseover"&&E.type!="mouseout"){return false}var i=false;var j=D;var r=E.relatedTarget;try{while(r&&r!==j){r=r.parentNode}if(r!==j){i=true}}catch(e){}return i};jQuery.Event.prototype.getOffsetX=function(){if(this.type=='click'){if(this.offsetX){return this.offsetX}if(this.layerX){return this.layerX}if(this.originalEvent.layerX){return this.originalEvent.layerX}}return 0};jQuery.Event.prototype.getOffsetY=function(){if(this.type=='click'){if(this.offsetY){return this.offsetY}if(this.layerY){return this.layerY}if(this.originalEvent.layerY){return this.originalEvent.layerY}}return 0};var q=jQuery.Event.prototype.stopImmediatePropagation;jQuery.Event.prototype.stopImmediatePropagation=function(e){q.apply(this,arguments);if(e){this._bIsStopHandlers=true}};jQuery.Event.prototype.isImmediateHandlerPropagationStopped=function(){return!!this._bIsStopHandlers}}());
