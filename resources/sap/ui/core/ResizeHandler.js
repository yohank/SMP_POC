/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ui.core.ResizeHandler");jQuery.sap.require("sap.ui.base.Object");jQuery.sap.require("sap.ui.Global");jQuery.sap.require("jquery.sap.script");(function(){var c=null;sap.ui.core.ResizeHandler=function(C){sap.ui.base.Object.apply(this);c=C;this.aResizeListeners=[];this.sInterval=null;this.iIdCounter=0;this.fDestroyHandler=jQuery.proxy(this.destroy,this);jQuery(window).bind("unload",this.fDestroyHandler)};sap.ui.core.ResizeHandler.prototype=jQuery.sap.newObject(sap.ui.base.Object.prototype);sap.ui.base.Object.defineClass("sap.ui.core.ResizeHandler",{baseType:"sap.ui.base.Object"});sap.ui.core.ResizeHandler.prototype.I_INTERVAL=200;sap.ui.core.ResizeHandler.prototype.destroy=function(e){jQuery(window).unbind("unload",this.fDestroyHandler);if(jQuery.browser.msie&&(jQuery.browser.version=="7.0"||jQuery.browser.version=="8.0")){jQuery.each(this.aResizeListeners,function(i,r){jQuery(r.oDomRef).unbind("resize",r.fHandler)})}c=null;this.aResizeListeners=[];this.sInterval=null};sap.ui.core.ResizeHandler.prototype.attachListener=function(d,h){var w=d.offsetWidth,H=d.offsetHeight,i="rs-"+new Date().valueOf()+"-"+this.iIdCounter++;this.aResizeListeners.push({sId:i,oDomRef:d,fHandler:h,iWidth:w,iHeight:H});if(jQuery.browser.msie&&(jQuery.browser.version=="7.0"||jQuery.browser.version=="8.0")){jQuery(d).bind("resize",h)}else{if(!this.sInterval){this.sInterval=jQuery.sap.delayedCall(this.I_INTERVAL,this,"checkSizes")}}return i};sap.ui.core.ResizeHandler.prototype.detachListener=function(i){var t=this;jQuery.each(this.aResizeListeners,function(a,r){if(r.sId==i){t.aResizeListeners.splice(a,1);if(jQuery.browser.msie&&(jQuery.browser.version=="7.0"||jQuery.browser.version=="8.0")){jQuery(r.oDomRef).unbind("resize",r.fHandler)}return false}});if(this.aResizeListeners.length==0){jQuery.sap.clearDelayedCall(this.sInterval);this.sInterval=null}};sap.ui.core.ResizeHandler.prototype.checkSizes=function(){jQuery.each(this.aResizeListeners,function(i,r){if(r){var d=r.oDomRef;if(d.offsetWidth!=r.iWidth||d.offsetHeight!=r.iHeight){r.iWidth=d.offsetWidth;r.iHeight=d.offsetHeight;var e=jQuery.Event("resize");e.target=r.oDomRef;e.currentTarget=r.oDomRef;r.fHandler(e)}}});this.sInterval=jQuery.sap.delayedCall(this.I_INTERVAL,this,"checkSizes")};sap.ui.core.ResizeHandler.register=function(d,h){if(!c||!c.oResizeHandler){return null}return c.oResizeHandler.attachListener(d,h)};sap.ui.core.ResizeHandler.deregister=function(i){if(!c||!c.oResizeHandler){return}c.oResizeHandler.detachListener(i)}}());
