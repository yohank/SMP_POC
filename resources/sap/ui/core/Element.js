/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ui.core.Element");jQuery.sap.require("jquery.sap.script");jQuery.sap.require("jquery.sap.strings");jQuery.sap.require("sap.ui.base.EventProvider");jQuery.sap.require("sap.ui.base.DataType");jQuery.sap.require("sap.ui.core.ElementMetadata");jQuery.sap.require("sap.ui.model.Model");jQuery.sap.require("sap.ui.model.SimpleType");sap.ui.base.EventProvider.extend("sap.ui.core.Element",{metadata:{"abstract":true,publicMethods:["getId","getMetadata","getTooltip_AsString","getTooltip_Text","getModel","setModel","hasModel","bindProperty","unbindProperty","bindAggregation","unbindAggregation","prop"],library:"sap.ui.core",properties:{},aggregations:{tooltip:{name:"tooltip",type:"sap.ui.core.TooltipBase",altTypes:["string"],multiple:false},customData:{name:"customData",type:"sap.ui.core.CustomData",multiple:true,singularName:"customData"}},associations:{},events:{}},constructor:function(i,s){sap.ui.base.EventProvider.apply(this);if(typeof(i)!="string"&&arguments.length>0){s=i;if(s&&s.id){i=s["id"]}else{i=null}}if(!i){i=this.getMetadata().uid()||jQuery.sap.uid()}else{var p=sap.ui.core.Element._fnIdPreprocessor;i=(p?p.call(this,i):i);var t=sap.ui.base.DataType.getType("sap.ui.core.ID");if(!t.isValid(i)){throw new Error("\""+i+"\" is not a valid ID.")}}this.sId=i;this.mProperties=this.getMetadata().createPropertyBag();this.mAggregations={};this.mAssociations={};this.mMethods={};this.oParent=null;this.bPrerendered=this.getDomRef()!=null;this.aDelegates=[];this.aBeforeDelegates=[];this.iSuppressInvalidate=0;this.oModels={};this.mBindingInfos={};this.sBindingPath=null;this.mBindingParametes=null;if(this._initCompositeSupport){this._initCompositeSupport(s)}if(this.init){this.init()}this.applySettings(s);this.register()},renderer:null},sap.ui.core.ElementMetadata);
sap.ui.core.Element.defineClass=function(c,s,m){return sap.ui.base.Object.defineClass(c,s,m||sap.ui.core.ElementMetadata)};
sap.ui.core.Element.prototype._handleEvent=function(e){var h="on"+e.type;this._callEventHandles(this.aBeforeDelegates,h,e);this._callEventHandles([this],h,e);this._callEventHandles(this.aDelegates,h,e)};
sap.ui.core.Element.prototype._callEventHandles=function(h,H,e){if(h.length>0){for(var i=0;i<h.length;i++){if(e.isImmediateHandlerPropagationStopped()){break}var o=h[i];if(o[H]){o[H](e)}}}};
sap.ui.core.Element.create=function(d,k){if(!d||d instanceof sap.ui.core.Element||typeof d!=="object"||d instanceof String){return d}function g(t){if(typeof t==="function"){return t}if(typeof t==="string"){return jQuery.sap.getObject(t)}}var c=g(d.Type)||g(k&&k.type);if(typeof c==="function"){return new c(d)}var m="Don't know how to create an Element from "+d+" ("+(typeof d)+")";jQuery.sap.log.fatal(m);throw new Error(m)};
sap.ui.core.Element._fnIdPreprocessor=null;sap.ui.core.Element._fnSettingsPreprocessor=null;
sap.ui.core.Element.runWithPreprocessors=function(f,p){var o={id:this._fnIdPreprocessor,settings:this._fnSettingsPreprocessor};p=p||{};this._fnIdPreprocessor=p.id;this._fnSettingsPreprocessor=p.settings;try{var r=f.call();this._fnIdPreprocessor=o.id;this._fnSettingsPreprocessor=o.settings;return r}catch(e){this._fnIdPreprocessor=o.id;this._fnSettingsPreprocessor=o.settings;throw e}};
sap.ui.core.Element.prototype.applySettings=function(s){if(!s||jQuery.isEmptyObject(s)){return this}var m=this.getMetadata(),v=m.getJSONKeys(),a=sap.ui.core.Element.create,p=sap.ui.core.Element._fnSettingsPreprocessor,k,V,K;p&&p.call(this,s);for(k in s){if(K=v[k]){V=s[k];switch(K._iKind){case 0:if(this.isBinding(V,K)){var b=this.extractBindingInfo(V);this.bindProperty(k,b)}else{this[K._sMutator](V)}break;case 1:if(K.altTypes&&this.isBinding(V,K)){var b=this.extractBindingInfo(V);this.bindProperty(k,b)}else{this[K._sMutator](a(V,K))}break;case 2:if(this.isBinding(V,K)){var b=this.extractBindingInfo(V);this.bindAggregation(k,b)}else{if(V&&!jQuery.isArray(V)){V=[V]}if(V){for(var i=0,l=V.length;i<l;i++){this[K._sMutator](a(V[i],K))}}}break;case 3:this[K._sMutator](V);break;case 4:if(V&&!jQuery.isArray(V)){V=[V]}if(V){for(var i=0,l=V.length;i<l;i++){this[K._sMutator](V[i])}}break;case 5:if(typeof V=="function"){this[K._sMutator](V)}else{this[K._sMutator](V[0],V[1],V[2])}break;default:break}}}return this};
sap.ui.core.Element.prototype.toString=function(){if(this.getMetadata){return"Element "+this.getMetadata().getName()+"#"+this.sId}else{return"Element {unknown class}#"+this.sId}};
sap.ui.core.Element.prototype.getId=function(){return this.sId};
sap.ui.core.Element.prototype.getDomRef=function(){return jQuery.sap.domById(this.getId())};
sap.ui.core.Element.prototype.$=function(){return jQuery(this.getDomRef())};
sap.ui.core.Element.prototype.isActive=function(){return this.oParent&&this.oParent.isActive()};
sap.ui.core.Element.prototype.prop=function(p,v){var P=this.getMetadata().getJSONKeys()[p];if(P){if(arguments.length==1){return this[P._sGetter]()}else{this[P._sMutator](v);return this}}};
sap.ui.core.Element.prototype.setProperty=function(p,v,s){var o=this.mProperties[p];v=this.validateProperty(p,v);if(jQuery.sap.equal(o,v)){return this}if(s){this.iSuppressInvalidate++}this.mProperties[p]=v;if(!this.isInvalidateSuppressed()){this.invalidate()}this.updateModelProperty(p,v,o);sap.ui.base.EventProvider.prototype.fireEvent.apply(this,["_change",{"id":this.getId(),"name":p,"oldValue":o,"newValue":v}]);if(s){this.iSuppressInvalidate--}return this};
sap.ui.core.Element.prototype.getProperty=function(p){var v=this.mProperties[p],m=this.getMetadata(),P=m.getAllProperties()[p],t;if(!P){throw new Error("Property \""+p+"\" does not exist in "+this)}t=sap.ui.base.DataType.getType(P.type);if(t instanceof sap.ui.base.DataType&&t.isArrayType()&&jQuery.isArray(v)){v=v.slice(0)}if(v instanceof String){v=v.valueOf()}return v};
sap.ui.core.Element.prototype.validateProperty=function(p,v){var m=this.getMetadata(),P=m.getAllProperties()[p],t;if(!P){throw new Error("Property \""+p+"\" does not exist in "+this)}t=sap.ui.base.DataType.getType(P.type);if(t instanceof sap.ui.base.DataType&&t.isArrayType()&&jQuery.isArray(v)){v=v.slice(0)}if(v===null||v===undefined){if(P.defaultValue!==null){return P.defaultValue}else{return t.getDefaultValue()}}if(t instanceof sap.ui.base.DataType){if(t.getName()=="string"){if(!(typeof v=="string"||v instanceof String)){v=""+v}}else if(t.getName()=="string[]"){for(var i=0;i<v.length;i++){if(!typeof v[i]=="string"){v[i]=""+v[i]}}}else if(!t.isValid(v)){throw new Error("\""+v+"\" is of type "+typeof v+", expected "+t.getName()+" for property \""+p+"\" of "+this)}}else if(!(v in t)){throw new Error("\""+v+"\" is not a valid entry of the enumeration for property \""+p+"\" of "+this)}return v};
sap.ui.core.Element.prototype.validateAggregation=function(a,e,m){var M=this.getMetadata(),A=M.getAllAggregations()[a],b,t,i;if(!A){if(a&&M._mHiddenAggregations&&M._mHiddenAggregations[a]){A=M._mHiddenAggregations[a]}else{throw new Error("Aggregation \""+a+"\" does not exist in "+this)}}if(!A.multiple&&!e){return e}t=jQuery.sap.getObject(A.type);if(typeof t==="function"&&e instanceof t){return e}if(e&&e.getMetadata&&e.getMetadata().isInstanceOf(A.type)){return e}b=A.altTypes;if(b&&b.length){if(e==null){return e}for(i=0;i<b.length;i++){t=sap.ui.base.DataType.getType(b[i]);if(t instanceof sap.ui.base.DataType){if(t.isValid(e)){return e}}else if(e in t){return e}}}throw new Error("\""+e+"\" is not valid for aggregation \""+a+"\" of "+this)};
sap.ui.core.Element.prototype.getOriginInfo=function(p){var v=this.mProperties[p];if(!(v instanceof String&&v.originInfo)){return null}return v.originInfo};
sap.ui.core.Element.prototype.setAssociation=function(a,i,s){if(i instanceof sap.ui.core.Element){i=i.getId()}else if(i!=null&&typeof i!=="string"){return this}if(this.mAssociations[a]===i){return this}if(s){this.iSuppressInvalidate++}this.mAssociations[a]=i;if(!this.isInvalidateSuppressed()){this.invalidate()}if(s){this.iSuppressInvalidate--}return this};
sap.ui.core.Element.prototype.getAssociation=function(a,d){var r=this.mAssociations[a];if(!r){r=this.mAssociations[a]=d||null}else{if(typeof r.length==='number'&&!(r.propertyIsEnumerable('length'))){return r.slice()}return r}return r};
sap.ui.core.Element.prototype.addAssociation=function(a,i,s){if(i instanceof sap.ui.core.Element){i=i.getId()}else if(typeof i!=="string"){return this}if(s){this.iSuppressInvalidate++}var I=this.mAssociations[a];if(!I){I=this.mAssociations[a]=[i]}else{I.push(i)}if(!this.isInvalidateSuppressed()){this.invalidate()}if(s){this.iSuppressInvalidate--}return this};
sap.ui.core.Element.prototype.removeAssociation=function(a,e,s){var I=this.mAssociations[a];var b=null;if(s){this.iSuppressInvalidate++}if(typeof(e)=="object"&&e.getId){e=e.getId()}if(typeof(e)=="string"){for(var i=0;i<I.length;i++){if(I[i]==e){e=i;break}}}if(typeof(e)=="number"){if(e<0||e>=I.length){jQuery.sap.log.warning("Element.removeAssociation called with invalid index: "+a+", "+e)}else{b=I[e];I.splice(e,1);if(!this.isInvalidateSuppressed()){this.invalidate()}}}if(s){this.iSuppressInvalidate--}return b};
sap.ui.core.Element.prototype.removeAllAssociation=function(a,s){var i=this.mAssociations[a];if(!i){return[]}if(s){this.iSuppressInvalidate++}delete this.mAssociations[a];if(!this.isInvalidateSuppressed()){this.invalidate()}if(s){this.iSuppressInvalidate--}return i};
sap.ui.core.Element.prototype.setAggregation=function(a,E,s){var o=this.mAggregations[a];if(o===E){return this}jQuery.sap.assert.apply(jQuery.sap,(function(t){try{t.validateAggregation(a,E,false);return[true]}catch(e){return[false,e.message]}}(this)));if(s){this.iSuppressInvalidate++}if(o instanceof sap.ui.core.Element){o.setParent(null)}this.mAggregations[a]=E;if(E instanceof sap.ui.core.Element){E.setParent(this,a,s)}else{if(!this.isInvalidateSuppressed()){this.invalidate()}}if(s){this.iSuppressInvalidate--}return this};
sap.ui.core.Element.prototype.getAggregation=function(a,d){var c=this.mAggregations[a];if(!c){c=this.mAggregations[a]=d||null}if(c){if(typeof c.length==='number'&&!(c.propertyIsEnumerable('length'))){return c.slice()}return c}else{return null}};
sap.ui.core.Element.prototype.indexOfAggregation=function(a,e){var c=this.mAggregations[a];if(c){if(c.length==undefined){return-2}for(var i=0;i<c.length;i++){if(c[i]==e){return i}}}return-1};
sap.ui.core.Element.prototype.insertAggregation=function(a,E,I,s){if(!E){return this}jQuery.sap.assert.apply(jQuery.sap,(function(t){try{t.validateAggregation(a,E,true);return[true]}catch(e){return[false,e.message]}}(this)));var c=this.mAggregations[a]||(this.mAggregations[a]=[]);var i=I<0?0:(I>c.length?c.length:I);if(i!==I){jQuery.sap.log.warning("Element.insertAggregation: index '"+I+"' out of range [0,"+c.length+"], forced to "+i)}c.splice(i,0,E);E.setParent(this,a,s);return this};
sap.ui.core.Element.prototype.addAggregation=function(a,E,s){if(!E){return this}jQuery.sap.assert.apply(jQuery.sap,(function(t){try{t.validateAggregation(a,E,true);return[true]}catch(e){return[false,e.message]}}(this)));var c=this.mAggregations[a];if(!c){c=this.mAggregations[a]=[E]}else{c.push(E)}E.setParent(this,a,s);return this};
sap.ui.core.Element.prototype.removeAggregation=function(a,e,s){var c=this.mAggregations[a];var C=null;if(s){this.iSuppressInvalidate++}if(typeof(e)=="string"){e=sap.ui.getCore().byId(e)}if(typeof(e)=="object"){for(var i=0;i<c.length;i++){if(c[i]==e){e=i;break}}}if(typeof(e)=="number"){if(e<0||e>=c.length){jQuery.sap.log.warning("Element.removeAggregation called with invalid index: "+a+", "+e)}else{C=c[e];c.splice(e,1);C.setParent(null);if(!this.isInvalidateSuppressed()){this.invalidate()}}}if(s){this.iSuppressInvalidate--}return C};
sap.ui.core.Element.prototype.removeAllAggregation=function(a,s){var c=this.mAggregations[a];if(!c){return[]}if(s){this.iSuppressInvalidate++}delete this.mAggregations[a];for(var i=0;i<c.length;i++){c[i].setParent(null)}if(!this.isInvalidateSuppressed()){this.invalidate()}if(s){this.iSuppressInvalidate--}return c};
sap.ui.core.Element.prototype.destroyAggregation=function(a,s){var c=this.mAggregations[a];if(!c){return this}if(s){this.iSuppressInvalidate++}delete this.mAggregations[a];if(c instanceof sap.ui.core.Element){c.destroy(s)}else if(c&&jQuery.isArray(c)){for(var i=0;i<c.length;i++){if(c[i]){c[i].destroy(s)}}}if(!this.isInvalidateSuppressed()){this.invalidate()}if(s){this.iSuppressInvalidate--}return this};
jQuery.sap.require("sap.ui.core.Core");
sap.ui.core.Element.prototype.invalidate=function(){if(this.oParent){this.oParent.invalidate(this)}};
sap.ui.core.Element.prototype.rerender=function(){if(this.oParent){this.oParent.rerender()}};
sap.ui.core.Element.prototype.isInvalidateSuppressed=function(){var i=this.iSuppressInvalidate>0;if(this.oParent&&this.oParent instanceof sap.ui.core.Element){i=i||this.oParent.isInvalidateSuppressed()}return i};
sap.ui.core.Element.prototype._removeChild=function(c,a,s){if(!a){jQuery.sap.log.error("Cannot remove aggregated child without aggregation name.",null,this)}else{if(s){this.iSuppressInvalidate++}var i=this.indexOfAggregation(a,c);var A=this.getMetadata().getJSONKeys()[a];if(i==-2){if(A&&this[A._sMutator]){this[A._sMutator](null)}else{this.setAggregation(a,null,s)}}else if(i>-1){if(A&&this[A._sRemoveMutator]){this[A._sRemoveMutator](i)}else{this.removeAggregation(a,i,s)}}else{}if(!this.isInvalidateSuppressed()){this.invalidate()}if(s){this.iSuppressInvalidate--}}};
sap.ui.core.Element.prototype.setParent=function(p,a,s){if(!p){this.oParent=null;this.sParentAggregationName=null;return}if(s){this.iSuppressInvalidate++}var o=this.getParent();if(o){o._removeChild(this,this.sParentAggregationName)}this.oParent=p;this.sParentAggregationName=a;if(this.hasModel()){this.updateBindingContext();this.updateBindings(true)}if(p&&!this.isInvalidateSuppressed()){p.invalidate(this)}if(s){this.iSuppressInvalidate--}return this};
sap.ui.core.Element.prototype.getParent=function(){return this.oParent};
sap.ui.core.Element.prototype.getUIArea=function(){return this.oParent?this.oParent.getUIArea():null};
sap.ui.core.Element.prototype.destroy=function(s){var t=this;if(s){this.iSuppressInvalidate++}if(this.exit){this.exit()}if(this._exitCompositeSupport){this._exitCompositeSupport()}for(var a in this.mAggregations){this.destroyAggregation(a,s)}this.deregister();if(this.oParent&&this.sParentAggregationName){this.oParent._removeChild(this,this.sParentAggregationName,s)}jQuery.each(this.mBindingInfos,function(n,b){if(b.factory){t.unbindAggregation(n)}else{t.unbindProperty(n)}});if(s){this.iSuppressInvalidate--}this.$().remove();this.setParent=function(){throw Error("The control with ID "+t.getId()+" was destroyed and cannot be used anymore.")};this.bIsDestroyed=true};
sap.ui.core.Element.prototype.fireEvent=function(e,p){p=p||{};p.id=p.id||this.getId();return sap.ui.base.EventProvider.prototype.fireEvent.apply(this,arguments)};
sap.ui.core.Element.prototype.addDelegate=function(d,c){this.removeDelegate(d);(c?this.aBeforeDelegates:this.aDelegates).push(d);return this};
sap.ui.core.Element.prototype.removeDelegate=function(d){for(var i=0;i<this.aDelegates.length;i++){if(this.aDelegates[i]==d){this.aDelegates.splice(i,1)}}for(var i=0;i<this.aBeforeDelegates.length;i++){if(this.aBeforeDelegates[i]==d){this.aBeforeDelegates.splice(i,1)}}return this};
sap.ui.core.Element.prototype.getFocusDomRef=function(){return this.getDomRef()||null};
sap.ui.core.Element.prototype.focus=function(){var f=this.getFocusDomRef();if(f){try{f.focus()}catch(e){var i=f.id?" (id: "+f.id+")":" ";jQuery.sap.log.warning("DOM element"+i+" in "+this.toString()+" which should be focused cannot be focused: "+e.message)}}};
sap.ui.core.Element.prototype.getFocusInfo=function(){return{id:this.getId()}};
sap.ui.core.Element.prototype.applyFocusInfo=function(f){this.focus();return this};
sap.ui.core.Element.prototype.setTooltip=function(t){var o=this.getTooltip();if(o instanceof sap.ui.core.TooltipBase){this.removeDelegate(o)}if(t instanceof sap.ui.core.TooltipBase){t._currentControl=this;this.addDelegate(t)}this.setAggregation("tooltip",t);return this};
sap.ui.core.Element.prototype.getTooltip=function(){return this.getAggregation("tooltip")};
sap.ui.core.Element.prototype.getTooltip_AsString=function(){var t=this.getTooltip();if(typeof t==="string"||t instanceof String){return t}return undefined};
sap.ui.core.Element.prototype.getTooltip_Text=function(){var t=this.getTooltip();if(t&&typeof t.getText==="function"){return t.getText()}return t};
(function(){var g=function(e,k){var d=e.getAggregation("customData");if(d){for(var i=0;i<d.length;i++){if(d[i].getKey()==k){return d[i]}}}return null};var s=function(e,k,v){if(v===null){var d=g(e,k);if(!d){return}var a=e.getAggregation("customData").length;if(a==1){e.destroyAggregation("customData",true)}else{e.removeAggregation("customData",d,true);d.destroy()}}else{var d=g(e,k);if(d){d.setValue(v)}else{var d=new sap.ui.core.CustomData({key:k,value:v});e.addAggregation("customData",d,true)}}};sap.ui.core.Element.prototype.data=function(){var a=arguments.length;if(a==0){var d=this.getAggregation("customData"),r={};if(d){for(var i=0;i<d.length;i++){r[d[i].getKey()]=d[i].getValue()}}return r}else if(a==1){var b=arguments[0];if(b===null){this.destroyAggregation("customData",true);return this}else if(typeof b=="string"){var c=g(this,b);return c?c.getValue():null}else if(typeof b=="object"){for(var k in b){s(this,k,b[k])}return this}else{throw new Error("When data() is called with one argument, this argument must be a string, an object or null, but is "+(typeof b)+":"+b+" (on UI Element with ID '"+this.getId()+"')")}}else if(a==2){s(this,arguments[0],arguments[1]);return this}else{throw new Error("data() may only be called with 0-2 arguments (on UI Element with ID '"+this.getId()+"')")}}})();
sap.ui.core.Element.prototype.isBinding=function(v,k){if(v&&typeof v=="object"&&v.path&&k.type!="object"){return true}if(typeof v=="string"&&jQuery.sap.startsWith(v,"{")&&jQuery.sap.endsWith(v,"}")){return true}return false};
sap.ui.core.Element.prototype.extractBindingInfo=function(v){var b;if(v&&typeof v=="object"){b=v}if(typeof v=="string"){b={};b.path=v.substr(1,v.length-2)}return b};
sap.ui.core.Element.prototype.getBindingInfo=function(n){return this.mBindingInfos[n]};
sap.ui.core.Element.prototype.bindElement=function(p,P){this.sBindingPath=p;this.mBindingParameters=P;this.updateBindingContext();return this};
sap.ui.core.Element.prototype.bindContext=function(p){this.bindElement(p);return this};
sap.ui.core.Element.prototype.unbindContext=function(){this.sBindingPath=null;this.oBindingContext=null;this.updateBindingContext();return this};
sap.ui.core.Element.prototype.bindProperty=function(n,b){var p,f,m,M,s,F,t,s;if(typeof b=="string"){p=arguments[1];f=arguments[2];m=arguments[3];if(s>0){M=p.substr(0,s);p=p.substr(s+1)}if(typeof f=="function"){F=f}else if(f instanceof sap.ui.model.SimpleType){t=f}b={path:p,formatter:F,type:t,model:M,mode:m}}s=b.path.indexOf(">");if(s>0){b.model=b.path.substr(0,s);b.path=b.path.substr(s+1)}if(this.isBound(n)){this.unbindProperty(n)}this.mBindingInfos[n]=b;if(this.getModel(b.model)){this._bindProperty(n,b)}return this};
sap.ui.core.Element.prototype._bindProperty=function(n,b){var m=this.getModel(b.model),c,B,p=this.getMetadata().getJSONKeys()[n],f=b.formatter,t=b.type,i=p.type,a=this,M=function(){var v=B.getValue();if(f){v=f.apply(a,[v])}if(t){try{v=t.formatValue(v,i);b.skipModelUpdate=true;a[p._sMutator](v);b.skipModelUpdate=false}catch(e){if(e instanceof sap.ui.model.FormatException){sap.ui.getCore().fireFormatError({element:a,property:n,type:t,newValue:v,oldValue:a.getProperty(n),exception:e})}else{throw e}}}else{b.skipModelUpdate=true;a[p._sMutator](v);b.skipModelUpdate=false}};c=b.model?null:this.getBindingContext();B=m.bindProperty(b.path,c,b.parameters);b.skipModelUpdate=false;b.binding=B;b.modelChangeHandler=M;if(!b.mode||!m.isBindingModeSupported(b.mode)){b.mode=m.getDefaultBindingMode()}if(b.mode!=sap.ui.model.BindingMode.OneTime){B.attachChange(M)}M()};
sap.ui.core.Element.prototype.unbindProperty=function(n){var b=this.mBindingInfos[n];if(b){if(b.binding){b.binding.detachChange(b.modelChangeHandler)}delete this.mBindingInfos[n]}return this};
sap.ui.core.Element.prototype.updateModelProperty=function(n,v,o){if(this.isBound(n)){var b=this.mBindingInfos[n],B=b.binding,p=this.getMetadata().getJSONKeys()[n],t=b.type,i=p.type;if(b.mode==sap.ui.model.BindingMode.TwoWay&&B&&!b.skipModelUpdate&&!b.formatter){if(t){try{v=t.parseValue(v,i);t.validateValue(v);b.binding.setValue(v);sap.ui.getCore().fireValidationSuccess({element:this,property:n,type:t,newValue:v,oldValue:o})}catch(e){if(e instanceof sap.ui.model.ParseException){sap.ui.getCore().fireParseError({element:this,property:n,type:t,newValue:v,oldValue:o,exception:e})}else if(e instanceof sap.ui.model.ValidateException){sap.ui.getCore().fireValidationError({element:this,property:n,type:t,newValue:v,oldValue:o,exception:e})}else{throw e}}}else{b.binding.setValue(v)}}}};
sap.ui.core.Element.prototype.bindAggregation=function(n,b){var p,t,s,f;if(typeof b=="string"){p=arguments[1];t=arguments[2];s=arguments[3];f=arguments[4];b={path:p,sorter:s,filters:f};if(t instanceof sap.ui.core.Element){b.template=t}else if(typeof t==="function"){b.factory=t}}if(this.isBound(n)){this.unbindAggregation(n)}if(!(b.template||b.factory)){throw new Error("Missing template or factory function for aggregation "+n+" of control id "+this.getId()+" !")}if(b.template){b.factory=function(i){return b.template.clone(i)}}this.mBindingInfos[n]=b;if(this.getModel()){this._bindAggregation(n,b)}return this};
sap.ui.core.Element.prototype._bindAggregation=function(n,b){var t=this,B,m=function(e){var u="update"+n.substr(0,1).toUpperCase()+n.substr(1);if(t[u]){t[u]()}else{t.updateAggregation(n)}};if(this.isTreeBinding(n)){B=this.getModel().bindTree(b.path,this.getBindingContext(),b.filters,b.parameters)}else{B=this.getModel().bindList(b.path,this.getBindingContext(),b.sorter,b.filters,b.parameters)}b.binding=B;b.modelChangeHandler=m;B.attachChange(m);m()};
sap.ui.core.Element.prototype.unbindAggregation=function(n){var b=this.mBindingInfos[n];if(b){if(b.binding){b.binding.detachChange(b.modelChangeHandler)}delete this.mBindingInfos[n]}return this};
sap.ui.core.Element.prototype.isTreeBinding=function(n){return false};
sap.ui.core.Element.prototype.updateBindings=function(u,m,r){var t=this;jQuery.each(this.mBindingInfos,function(n,b){if(t.getModel(b.model)&&(u||(b.model==m&&(!b.binding||b.binding.getModel()!==t.getModel(m))))){if(r&&b.binding){b.binding.detachChange(b.modelChangeHandler);delete b.binding}if(!b.binding){if(b.factory){t._bindAggregation(n,b)}else{t._bindProperty(n,b)}}}});jQuery.each(this.mAggregations,function(n,a){if(a instanceof sap.ui.core.Element){a.updateBindings(u,m,r)}else if(a instanceof Array){for(var i=0;i<a.length;i++){a[i].updateBindings(u,m,r)}}})};
sap.ui.core.Element.prototype.updateAggregation=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,a=this.getMetadata().getJSONKeys()[n],c,t=this;this[a._sDestructor]();if(this.isTreeBinding(n)){var N=0,u=function(C,f,B,p){jQuery.each(C,function(i,o){var I=t.getId()+"-"+N++;c=f(I,o);c.setBindingContext(o);p[a._sMutator](c);u(B.getNodeContexts(o),f,B,c)})};u(B.getRootContexts(),f,B,this)}else{jQuery.each(B.getContexts(),function(i,C){var I=t.getId()+"-"+i;c=f(I,C);c.setBindingContext(C);t[a._sMutator](c)})}};
sap.ui.core.Element.prototype.isBound=function(n){return(n in this.mBindingInfos)};
sap.ui.core.Element.prototype.getBinding=function(n){return this.mBindingInfos[n]&&this.mBindingInfos[n].binding};
sap.ui.core.Element.prototype.getBindingPath=function(n){return this.mBindingInfos[n]&&this.mBindingInfos[n].path};
sap.ui.core.Element.prototype.setBindingContext=function(c){this.oBindingContext=c;this.updateBindingContext();return this};
sap.ui.core.Element.prototype.updateBindingContext=function(s){var m=this.getModel(),p,t=this;if(this.sBindingPath&&!s){if(this.oParent&&m==this.oParent.getModel()){p=this.oParent.getBindingContext()}if(m){m.createBindingContext(this.sBindingPath,p,this.mBindingParameters,function(c){t.oBindingContext=c;t.updateBindingContext(true)})}else{this.oBindingContext=undefined}return}var c=this.getBindingContext();jQuery.each(this.mBindingInfos,function(n,b){var B=b.binding;if(B&&B.getModel()==m){B.setContext(c)}});jQuery.each(this.mAggregations,function(n,a){if(a instanceof sap.ui.core.Element){a.updateBindingContext()}else if(a instanceof Array){for(var i=0;i<a.length;i++){a[i].updateBindingContext()}}})};
sap.ui.core.Element.prototype.getBindingContext=function(){var m=this.getModel();if(this.oBindingContext){return this.oBindingContext}else if(m&&this.oParent&&m!=this.oParent.getModel()){return undefined}else{return this.oParent&&this.oParent.getBindingContext()}};
sap.ui.core.Element.prototype.setModel=function(m,n){if(m!==this.oModels[n]){this.oModels[n]=m;if(!n){this.updateBindingContext()}this.updateBindings(false,n,true)}return this};
sap.ui.core.Element.prototype.getModel=function(n){return this.oModels[n]||(this.oParent&&this.oParent.getModel(n))};
sap.ui.core.Element.prototype.hasModel=function(){if(!jQuery.isEmptyObject(this.oModels)||(this.oParent&&this.oParent.hasModel())){return true}else{return false}};
sap.ui.core.Element.prototype.clone=function(I,l){if(!I){I=sap.ui.core.ElementMetadata.uid("clone")||jQuery.sap.uid()}if(!l){l=jQuery.map(this.findElements(true),function(e){return e.getId()})}var m=this.getMetadata(),c=m._oClass,s=this.getId()+"-"+I,S={},p=this.mProperties,k,C;for(k in p){if(p.hasOwnProperty(k)){S[k]=p[k]}}jQuery.each(this.mAggregations,function(n,a){if(m.hasAggregation(n)){if(a instanceof sap.ui.core.Element){S[n]=a.clone(I,l)}else if(jQuery.isArray(a)){S[n]=[];for(var i=0;i<a.length;i++){S[n].push(a[i].clone(I,l))}}else{S[n]=a}}});jQuery.each(this.mAssociations,function(n,a){if(jQuery.isArray(a)){a=a.slice(0);for(var i=0;i<a.length;i++){if(jQuery.inArray(a[i],l)>=0){a[i]+="-"+I}}}else if(jQuery.inArray(a,l)>=0){a+="-"+I}S[n]=a});C=new c(s,S);jQuery.each(this.mEventRegistry,function(n,L){C.mEventRegistry[n]=L.slice()});jQuery.each(this.oModels,function(n,M){C.setModel(M,n)});jQuery.each(this.mBindingInfos,function(n,b){var o=jQuery.extend({},b);delete o.binding;if(b.factory){C.bindAggregation(n,o)}else{C.bindProperty(n,o)}});return C};
sap.ui.core.Element._mapAggregation=function(p,o,n){var k=p.getMetadata().getJSONKeys();var O=k[o];var N=k[n];if(!O||!N||O._iKind!=2||N._iKind!=2){return}var f={"insert":true,"add":true,"remove":true,"removeAll":false,"indexOf":true,"destroy":false,"get":false};function m(P,c){return P+c.substring(0,1).toUpperCase()+c.substring(1)}function a(F){return function(){return this[F].apply(this,arguments)}}for(var P in f){var s=m(P,f[P]?O.singularName:O._sName);var b=m(P,f[P]?N.singularName:N._sName);p[s]=a(b)}};
sap.ui.core.Element.prototype.findElements=function(r){var c=[];function f(C){for(var n in C.mAggregations){var a=C.mAggregations[n];if(jQuery.isArray(a)){for(var i=0;i<a.length;i++){c.push(a[i]);if(r){f(a[i])}}}else if(a instanceof sap.ui.core.Element){c.push(a);if(r){f(a)}}}}f(this);return c};
